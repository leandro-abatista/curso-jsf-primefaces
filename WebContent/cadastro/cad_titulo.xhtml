<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:sec="http://www.springframework.org/security/facelets/tags"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:util="http://java.sun.com/jsf/composite/components"> 
      

<ui:composition template="/templates/templatePrincipal.xhtml">

	<ui:define name="corpo">
	
	<div class="espacoBranco"/><!-- Espaço em branco -->
	
		<h:form id="formCadastro" prependId="false">
		
			<p:fieldset legend="Cadastro de título">
				
				<div class="espacoBranco"/><!-- Espaço em branco -->
				
				<p:panel id="panelCadastro">
				
					<h:panelGrid id="gridTitulo" columns="3">
					
						<p:column>
							<p:row>
								<h:outputLabel id="labelId" for="id" value="Código: " />
							</p:row>
						</p:column>
						
						<p:column>
							<p:row>
								<p:inputText readonly="true" id="id" value="#{tituloBeanView.objetoSelecionado.tit_codigo}"/>
							</p:row>
						</p:column>
						
						<p:column>
							<p:row>
								
							</p:row>
						</p:column>
						
						<!-- ========================================================================================== -->
						
						<p:column>
							<p:row>
								<h:outputLabel id="labelTituloOrigem" for="tituloOrigem" value="Origem * :" />
							</p:row>
						</p:column>
						
						<p:column>
							<p:row>
								<p:selectOneMenu id="tituloOrigem" 
								value="#{tituloBeanView.objetoSelecionado.tit_origem}" 
								required="true" requiredMessage="Informe a origem!" 
								style="width: 150px; height: 25px;">
								
									<f:selectItem itemLabel="Selecione" itemValue="" noSelectionOption="true"/>
									<f:selectItem itemLabel="Origem" itemValue="ORIGEM"/>
									<f:selectItem itemLabel="Comissão" itemValue="COMISSAO"/>
								
								</p:selectOneMenu>
							</p:row>
						</p:column>
						
						<p:column>
							<p:row>
								<p:message for="tituloOrigem"/>
							</p:row>
						</p:column>
						
						<!-- ========================================================================================== -->
						
						<p:column>
							<p:row>
								<h:outputLabel id="labelValor" for="campoValor" value="Valor título R$ * :" />
							</p:row>
						</p:column>
						
						<p:column>
							<p:row>
								<p:inputText type="number" id="campoValor" maxlength="15" size="20" required="true" 
								requiredMessage="Informe o valor!" value="#{tituloBeanView.objetoSelecionado.tit_valor}">
								
									<f:convertNumber for="campoValor" type="currency" pattern="#,##0.00"/>
								</p:inputText>
							</p:row>
						</p:column>
						
						<p:column>
							<p:row>
								<p:message for="campoValor"/>
							</p:row>
						</p:column>
						
						<!-- ========================================================================================== -->
						
						<p:column>
							<p:row>
								<h:outputLabel id="labelValorPago" for="campoValorPago" value="Valor pago R$ * :" />
							</p:row>
						</p:column>
						
						<p:column>
							<p:row>
								<p:inputText type="number" id="campoValorPago" maxlength="15" size="20" required="true" 
								requiredMessage="Informe o valor pago!" value="#{tituloBeanView.objetoSelecionado.tit_valorPago}">
								
									<f:convertNumber for="campoValorPago" type="currency" pattern="#,##0.00"/>
								</p:inputText>
							</p:row>
						</p:column>
						
						<p:column>
							<p:row>
								<p:message for="campoValorPago"/>
							</p:row>
						</p:column>
						
						<!-- ========================================================================================== -->
						
						<p:column>
							<p:row>
								<h:outputLabel id="labelTipoTitulo" for="campoTipoTitulo" value="Tipo do Título * :" />
							</p:row>
						</p:column>
						
						<p:column>
							<p:row>
								<p:selectOneMenu id="campoTipoTitulo" 
								required="true" requiredMessage="Informe o tipo do título!"
								value="#{funcionarioBeanView.objetoSelecionado.tipoEntidade}"
								style="width: 150px; height: 25px;">
									
									<f:selectItem itemValue="" itemLabel="Selecione" noSelectionOption="true"/>
									<f:selectItem itemValue="RECEBER" itemLabel="Receber"/>
									<f:selectItem itemValue="PAGAR" itemLabel="Pagar"/>
								
								</p:selectOneMenu>
							</p:row>
						</p:column>
						
						<p:column>
							<p:row>
								<p:message for="campoTipoTitulo"/>
							</p:row>
						</p:column>
						
						<!-- ========================================================================================== -->
						
						<p:column>
							<p:row>
								<h:outputLabel id="labelDataHoraTitulo" for="campoDataHoraTitulo" value="Data/Hora * :" />
							</p:row>
						</p:column>
						
						<p:column>
							<p:row>
								<p:inputText id="campoDataHoraTitulo" value="#{tituloBeanView.objetoSelecionado.tit_dataHora}">
									<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy -- HH:mm" dateStyle="long" 
	 								timeStyle="full" timeZone="GMT-03:00"/>
								</p:inputText>
							</p:row>
						</p:column>
						
						<p:column>
							<p:row>
								<p:message for="campoDataHoraTitulo"/>
							</p:row>
						</p:column>
						
						<!-- ========================================================================================== -->
						
						<p:column>
							<p:row>
								<h:outputLabel id="labelTituloBaixado" for="campoTituloBaixado" value="Baixado * :" />
							</p:row>
						</p:column>
						
						<p:column>
							<p:row>
								<p:selectBooleanCheckbox id="campoTituloBaixado" maxlength="150" size="60" required="true"
								requiredMessage="Informe se o titulo foi baixado!" value="#{tituloBeanView.objetoSelecionado.tit_baixado}"/>
							</p:row>
						</p:column>
						
						<p:column>
							<p:row>
								<p:message for="campoTituloBaixado"/>
							</p:row>
						</p:column>
						
						<!-- ========================================================================================== -->
						
						<p:column>
							<p:row>
								<h:outputLabel id="labelResponsavel" for="campoResponsavelTitulo" value="Responsável pelo título: " />
							</p:row>
						</p:column>
						
						<p:column>
							<p:row>
								<p:inputText id="campoResponsavelTitulo" 
								value="#{tituloBeanView.objetoSelecionado.ent_codigoAbertura.ent_nomeFantasia}" size="50"/>
							</p:row>
						</p:column>
						
						<p:column>
							<p:row>
								<p:message for="campoTituloBaixado"/>
							</p:row>
						</p:column>
						
						<!-- ========================================================================================== -->
						
						<p:column>
							<p:row>
								<h:outputLabel id="labelResponsavelPagamento" for="campoResponsavelPagamentoTitulo" value="Pagador do título: " />
							</p:row>
						</p:column>
						
						<p:column>
							<p:row>
								<p:autoComplete id="campoResponsavelPagamentoTitulo" 
								completeMethod="#{tituloBeanView.pesquisarPagador}"
								minQueryLength="4"
								queryDelay="3000"
								placeholder="Digite no mínimo 4 letras."
								value="#{tituloBeanView.objetoSelecionado.ent_codigo}"
								var="ent"
								itemValue="#{ent}"
								itemLabel="#{ent.ent_nomeFantasia}"
								converter="entidadeConverter">
								
								</p:autoComplete>
							</p:row>
						</p:column>
						
						<p:column>
							<p:row>
								<p:message for="campoResponsavelPagamentoTitulo"/>
							</p:row>
						</p:column>
						
						<!-- ========================================================================================== -->
						
					
					</h:panelGrid>
				
				</p:panel>
				
				<div class="espacoBranco"/><!-- Espaço em branco -->
				
				<!-- chamando os botões genéricos -->
				<util:botoesCrud managedBeanView="#{tituloBeanView}"
				camposReload=":formTemplate:msg, tableResult"
				botaoNovo="#{contextBean.possuiAcesso('TITULO_NOVO', 'ADMIN')}"
				botaoSalvar="#{contextBean.possuiAcesso('TITULO_NOVO', 'ADMIN') and tituloBeanView.objetoSelecionado.tit_codigo == null}"
				botaoAtualizar="#{contextBean.possuiAcesso('TITULO_EDITAR', 'ADMIN') and tituloBeanView.objetoSelecionado.tit_codigo != null}"
				botaoExcluir="#{contextBean.possuiAcesso('TITULO_EXCLUIR', 'ADMIN')}">
				
				</util:botoesCrud>
			
			</p:fieldset>
		
		</h:form>
		
		<script type="text/javascript" charset="UTF-8">

			addFocoAoCampo("nomefantasia");
			gerenciaTeclaEnter();

		</script>
		
		<div class="espacoBranco"/><!-- Espaço em branco -->
		
		<p:dataTable id="tableResult" 
		var="objeto" 
		value="#{tituloBeanView.list.list}"
		emptyMessage="Não existe valores para serem exibidos."
		paginator="true"
		rows="5"
		lazy="true"
		rendered="#{tituloBeanView.list.list.size() > 0}">
			
			<ui:include src="/resources/components/colunasDataTableTitulo.xhtml" />
		
		</p:dataTable>

	</ui:define>
	
</ui:composition>
	 
</html>
