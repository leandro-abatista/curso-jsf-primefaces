<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:sec="http://www.springframework.org/security/facelets/tags"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:util="http://java.sun.com/jsf/composite/components"> 
      

	 <h:form id="formCadastroMsgDialog" prependId="false">
	 	
	 	<c:set var="isCadastro" value="true" scope="view"/>
	 	
	 	<p:panel id="panelCadastroMsgDialog" header="[Nova Mensagem]" style="border: 2px solid; background: #EEE9E9;">
	 	
	 		<h:panelGrid id="panelGridMsgDialog" columns="3">
	 		
	 			<h:column><!-- 1º coluna -->
	 				<p:row>
	 					<h:outputLabel for="idMsgDialog" id="labelMsgDialog" value="Código : " />
	 				</p:row>
	 			</h:column>
	 			
	 			<h:column><!-- 2º coluna -->
	 				<p:row>
	 					<p:inputText id="idMsgDialog" 
	 					readonly="true" 
	 					value="#{mensagemBeanView.objetoSelecionado.men_cod}"/>
	 				</p:row>
	 			</h:column>
	 			
	 			<h:column><!-- 3º coluna -->
	 				<!-- coluna vazia -->
	 			</h:column>
	 			
	 			<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	 			
	 			<h:column>
	 				<p:row>
	 					<h:outputLabel id="labelOrigemMsgDialog" for="usuarioOrigemMsgDialog" value="Usuário de Origem : " />
	 				</p:row>
	 			</h:column>
	 			
	 			<h:column><!-- 3º coluna -->
	 				<p:row>
	 					<p:inputText id="usuarioOrigemMsgDialog"
	 					readonly="true"
	 					immediate="true"
	 					value="#{mensagemBeanView.objetoSelecionado.usu_origem.ent_codigo}"/>
	 					
	 					<p:spacer/>
	 					
	 					<p:inputText id="loginOrigemMsgDialog"
	 					style="width: 30em;"
	 					readonly="true"
	 					immediate="true"
	 					required="true"
	 					requiredMessage="Usuário logado não foi carregado!"
	 					value="#{mensagemBeanView.objetoSelecionado.usu_origem.ent_login}"/>
	 				</p:row>
	 			</h:column>
	 			
	 			<h:column><!-- 3º coluna -->
	 				<p:row>
	 					<p:message for="loginOrigemMsgDialog"/>
	 				</p:row>
	 			</h:column>
	 			
	 			<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	 			
	 			<h:column><!-- 1º coluna -->
	 				<p:row>
	 					<h:outputLabel id="labelDestinoMsgDialog" 
	 					for="usuarioDestinoMsgDialog" value="Usuário de Destino *: " />
	 				</p:row>
	 			</h:column>
	 			
	 			<h:column><!-- 2º coluna -->
	 				<p:row>
	 					<p:inputText id="usuarioDestinoMsgDialog"
	 					immediate="false"
	 					required="true"
	 					requiredMessage="Informe o usuário de destino!"
	 					value="#{mensagemBeanView.objetoSelecionado.usu_destino.ent_codigo}"
	 					onblur="pesquisarUserDestinoPerderFocoDialog(this.value);"/>
	 					
	 					<p:spacer/>
	 					
	 					<p:inputText id="loginDestinoMsgDialog"
	 					style="width: 30em;"
	 					immediate="true"
	 					required="true"
	 					requiredMessage="Informe o usuário de destino!"
	 					value="#{mensagemBeanView.objetoSelecionado.usu_destino.ent_login}"/>
	 				</p:row>
	 			</h:column>
	 			
	 			<h:column>
	 				<p:row>
	 					<p:message for="usuarioDestinoMsgDialog"/>
	 				</p:row>
	 			</h:column>
	 			
	 			<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	 			
	 			<h:column><!-- 1º coluna -->
	 				<p:row>
	 					<h:outputLabel id="labelExigeRespostaMsgDialog" 
	 					for="exigeRespostaMsgDialog" value="Exige resposta : " />
	 				</p:row>
	 			</h:column>
	 			
	 			<h:column><!-- 2º coluna -->
	 				<p:row>
	 					<p:selectBooleanCheckbox id="exigeRespostaMsgDialog"
	 					value="#{mensagemBeanView.objetoSelecionado.men_exigirResposta}"/>
	 				</p:row>
	 			</h:column>
	 			
	 			<h:column><!-- 3º coluna -->
	 				<p:row>
	 					<p:message for="exigeRespostaMsgDialog"/>
	 				</p:row>
	 			</h:column>
	 			
	 			<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	 			
	 			<p:column>
	 				<p:row>
	 					<h:outputLabel id="labelMensagemDataHoraMsgDialog" for="mensagemDataHoraMsgDialog" value="Data de Envio : " />
	 				</p:row>
	 			</p:column>
	 			
	 			<p:column>
	 				<p:row>
	 					<p:inputText id="mensagemDataHoraMsgDialog" readonly="true" 
	 					value="#{mensagemBeanView.objetoSelecionado.men_dataHora}">
	 						
	 						<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy -- HH:mm:ss" dateStyle="long" 
	 						timeStyle="full" timeZone="GMT-03:00"/>
	 						
	 					</p:inputText>
	 				</p:row>
	 			</p:column>
	 			
	 			<p:column>
	 				<p:row>
	 					<p:message for="mensagemDataHoraMsgDialog"/>
	 				</p:row>
	 			</p:column>
	 			
	 			<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	 			
	 			<p:column>
	 				<p:row>
	 					<h:outputLabel id="labelAssuntoDataHoraMsgDialog" for="mensagemAssuntoMsgDialog" value="Assunto : " />
	 				</p:row>
	 			</p:column>
	 			
	 			<p:column>
	 				<p:row>
	 					<p:inputText id="mensagemAssuntoMsgDialog"
	 					style="width: 45em;"
	 					immediate="true"
	 					required="true"
	 					requiredMessage="Informe o assunto!"
	 					maxlength="80"
	 					value="#{mensagemBeanView.objetoSelecionado.men_assunto}"/>
	 				</p:row>
	 			</p:column>
	 			
	 			<p:column>
	 				<p:row>
	 					<p:message for="mensagemAssuntoMsgDialog"/>
	 				</p:row>
	 			</p:column>
	 			
	 			<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	 			
	 			<p:column>
	 				<p:row>
	 					<h:outputLabel id="labelMensagemMsgDialog" for="mensagemMsgDialog" value="Mesagem : " />
	 				</p:row>
	 			</p:column>
	 			
	 			<p:column>
	 				<p:row>
	 					<p:inputTextarea id="mensagemMsgDialog"
	 					style="heigth: 110px; width: 45em;"
	 					autoResize="true"
	 					immediate="false"
	 					required="true"
	 					requiredMessage="Informe a mensagem!"
	 					maxlength="500"
	 					value="#{mensagemBeanView.objetoSelecionado.men_descricao}"/>
	 				</p:row>
	 			</p:column>
	 			
	 			<p:column>
	 				<p:row>
	 					<p:message for="mensagemMsgDialog"/>
	 				</p:row>
	 			</p:column>
	 			
	 			<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	 		
	 		</h:panelGrid>
	 	
	 	</p:panel>
	 	
	 	<div class="espacoBranco"/><!-- Espaço em branco -->
	 	
	 	<!-- botão novo -->
		<p:commandButton id="buttonNovo" value="Novo" 
		style="height: 40px; width: 100px; background: #1E90FF; border: 2px solid #C0C0C0; margin: 5px;" 
		rendered="#{contextBean.possuiAcesso('MENSAGENS_ENVIAR_NOVO', 'ADMIN')}"
		ajax="true"
		actionListener="#{mensagemBeanView.novo}"
		process="@this, @form"
		immediate="false"
		update="formCadastroMsgDialog, :formTemplate:msg">
			
			<p:ajax listener="#{mensagemBeanView.novo}"/>
			
		</p:commandButton>
		
		<!-- botão Cancelar -->
		<p:commandButton id="buttonCancelar" value="Cancelar" 
		style="height: 40px; width: 100px; background: #FF4040; border: 2px solid #C0C0C0; margin: 5px;" 
		ajax="true"
		actionListener="#{mensagemBeanView.novo}"
		immediate="false"
		update="formCadastroMsgDialog, :formTemplate:msg"
		onclick="enviarMsgDialog.hide();">
		</p:commandButton>
		
		<!-- botão salvar/enviar -->
		<p:commandButton id="buttonEnviar" value="Enviar" 
		style="height: 40px; width: 100px; background: #00FF7F; border: 2px solid #C0C0C0; margin: 5px;" 
		rendered="#{contextBean.possuiAcesso('MENSAGENS_ENVIAR_NOVO', 'ADMIN')}"
		ajax="true"
		actionListener="#{mensagemBeanView.saveNotReturn}"
		process="@this, @form"
		immediate="false"
		update="formCadastroMsgDialog, :formTemplate:msg"
		partialSubmit="true">
		</p:commandButton>
	 	
	 </h:form>
	
</html>
